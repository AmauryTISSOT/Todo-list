(()=>{"use strict";const e=class{constructor(e){this.todoObject=e}modalE=document.querySelector(".modal");todoInjection(){const e=document.querySelector(".content"),t=document.createElement("div");t.className="todoDiv",e.appendChild(t);const o=document.createElement("h3");t.appendChild(o).textContent=this.todoObject.title;const n=document.createElement("p");t.appendChild(n).textContent=this.todoObject.description;const c=document.createElement("div");c.className="date",t.appendChild(c).textContent=this.todoObject.dueDate;const d=document.createElement("button");d.className="btnModify",t.appendChild(d).textContent="Modify";const i=document.createElement("button");i.className="btnCheck",t.appendChild(i).textContent="Check","urgent"===this.todoObject.priority?t.id="urgent":t.id="non-urgent",this._checkRemove(i),this._checkModify(d)}popUpModal(){document.querySelector(".add").addEventListener("click",(()=>{this.modalE.style.display="block"})),document.querySelector("#close").addEventListener("click",(()=>this.modalE.style.display="none")),window.addEventListener("click",(e=>{e.target==this.modalE&&(this.modalE.style.display="none")}))}_checkRemove(e){e.addEventListener("click",(()=>{e.parentElement.remove(),this.todoObject.check=!0}))}_checkModify(e){e.addEventListener("click",(()=>{this.modalE.style.display="block";const t=document.getElementById("get-title"),o=document.getElementById("get-description"),n=document.getElementById("get-due-date"),c=document.getElementById("get-priority"),d=document.querySelector("form");t.value=this.todoObject.title,o.value=this.todoObject.description,n.value=this.todoObject.dueDate,c.value=this.todoObject.priority,d.addEventListener("submit",(d=>{d.preventDefault(),this.modalE.style.display="none",this.todoObject.title=t.value,this.todoObject.description=o.value,this.todoObject.dueDate=n.value,this.todoObject.priority=c.value,t.value="",o.value="",n.value="",e.parentElement.remove(),this.todoObject.check=!0}))}))}},t=class{constructor(e,t,o,n,c,d){this.title=e,this.description=t,this.dueDate=o,this.priority=n,this.check=c,this.project=d}},o=class{currentDay=(new Date).toISOString().split("T")[0];currentMonth=(new Date).getMonth()+1;compareDay(e){return this.currentDay===e}compareMonth(e){if(""!=e){const t=/\/(\d{1,2})\//g;let o=(e=e.replaceAll("-","/")).match(t);return o=o[0].match(/\d\d/),o=parseInt(o[0]),this.currentMonth===o}}compareWeek(e){if(""!=e){Date.prototype.getWeekNumber=function(){var e=new Date(Date.UTC(this.getFullYear(),this.getMonth(),this.getDate())),t=e.getUTCDay()||7;e.setUTCDate(e.getUTCDate()+4-t);var o=new Date(Date.UTC(e.getUTCFullYear(),0,1));return Math.ceil(((e-o)/864e5+1)/7)};const t=(new Date).getWeekNumber(),o=function(e){return e%4==0&&(e%100!=0||e%400==0)},n=[31,28,31,30,31,30,31,31,30,31,30,31],c=[31,29,31,30,31,30,31,31,30,31,30,31],d=/(\d+)/g;let i=(e=e.replaceAll("-","/")).match(d);i=parseInt(i[0]);const r=/\/(\d{1,2})\//g;let l=e.match(r);l=l[0].match(/\d\d/),l=parseInt(l[0]);const a=/(\d+)$/g;let s=e.match(a);s=parseInt(s[0]);let h=0;if(o(i))for(let e=0;e<l-1;e++)h+=c[e];else for(let e=0;e<l-1;e++)h+=n[e];return t===Math.round((h+s)/7)}}};(new e).popUpModal();const n=new class{constructor(){this.todoArray=[]}getFormInfo(){const o=document.querySelector(".modal"),n=document.querySelector("form"),c=document.getElementById("get-title"),d=document.getElementById("get-description"),i=document.getElementById("get-due-date"),r=document.getElementById("get-priority");n.addEventListener("submit",(n=>{n.preventDefault();const l=new t(c.value,d.value,i.value,r.value);o.style.display="none",new e(l).todoInjection(),c.value="",d.value="",i.value="",this.todoArray.push(l),this._print()}))}_print(){console.table(this.todoArray)}_todayTodo(){const n=document.getElementById("today"),c=new o;let d=[];n.addEventListener("click",(()=>{console.log("today click"),this.todoArray.forEach((o=>{console.log(o);for(var n=document.querySelector(".content"),i=n.firstElementChild;i;)i.remove(),i=n.firstElementChild;if(c.compareDay(o.dueDate)){d.push(o);const n=new t(o.title,o.description,o.dueDate,o.priority,o.check,o.project);new e(n).todoInjection()}else console.log("today not match")}))}))}_weekTodo(){const n=document.getElementById("week"),c=new o;n.addEventListener("click",(()=>{console.log("week click"),this.todoArray.forEach((o=>{let n=document.querySelector(".content"),d=n.firstElementChild;for(;d;)d.remove(),d=n.firstElementChild;if(c.compareWeek(o.dueDate)){const n=new t(o.title,o.description,o.dueDate,o.priority,o.check,o.project);new e(n).todoInjection()}else console.log("week not match")}))}))}_monthTodo(){const n=document.getElementById("month"),c=new o;let d=[];n.addEventListener("click",(()=>{console.log("month click"),this.todoArray.forEach((o=>{for(var n=document.querySelector(".content"),i=n.firstElementChild;i;)i.remove(),i=n.firstElementChild;if(c.compareMonth(o.dueDate)){d.push(o);const n=new t(o.title,o.description,o.dueDate,o.priority,o.check,o.project);new e(n).todoInjection()}}))}))}_allTodo(){const o=document.getElementById("all");let n=[];console.table(n),o.addEventListener("click",(()=>{console.log(this.todoArray.filter((()=>void 0===this.todoArray.check))),n.push(this.todoArray.filter((()=>void 0===this.todoArray.check))),n.forEach((o=>{for(var n=document.querySelector(".content"),c=n.firstElementChild;c;)c.remove(),c=n.firstElementChild;const d=new t(o.title,o.description,o.dueDate,o.priority,o.check,o.project);new e(d).todoInjection()}))}))}sortByDate(){this._allTodo(),this._todayTodo(),this._weekTodo(),this._monthTodo()}};n.getFormInfo(),n.sortByDate(),new o})();
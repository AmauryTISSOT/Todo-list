(()=>{"use strict";const e=class{constructor(e){this.todoObject=e}modalE=document.querySelector(".modal");todoInjection(){const e=document.querySelector(".content"),t=document.createElement("div");t.className="todoDiv",e.appendChild(t);const o=document.createElement("h3");t.appendChild(o).textContent=this.todoObject.title;const n=document.createElement("p");t.appendChild(n).textContent=this.todoObject.description;const d=document.createElement("div");d.className="date",t.appendChild(d).textContent=this.todoObject.dueDate;const c=document.createElement("button");c.className="btnModify",t.appendChild(c).textContent="Modify";const i=document.createElement("button");i.className="btnCheck",t.appendChild(i).textContent="Check","urgent"===this.todoObject.priority?t.id="urgent":t.id="non-urgent",this._checkRemove(i),this._checkModify(c)}popUpModal(){document.querySelector(".add").addEventListener("click",(()=>{this.modalE.style.display="block"})),document.querySelector("#close").addEventListener("click",(()=>this.modalE.style.display="none")),window.addEventListener("click",(e=>{e.target==this.modalE&&(this.modalE.style.display="none")}))}_checkRemove(e){e.addEventListener("click",(()=>{e.parentElement.remove(),this.todoObject.check=!0}))}_checkModify(e){e.addEventListener("click",(()=>{this.modalE.style.display="block";const t=document.getElementById("get-title"),o=document.getElementById("get-description"),n=document.getElementById("get-due-date"),d=document.getElementById("get-priority"),c=document.querySelector("form");t.value=this.todoObject.title,o.value=this.todoObject.description,n.value=this.todoObject.dueDate,d.value=this.todoObject.priority,c.addEventListener("submit",(c=>{c.preventDefault(),this.modalE.style.display="none",this.todoObject.title=t.value,this.todoObject.description=o.value,this.todoObject.dueDate=n.value,this.todoObject.priority=d.value,t.value="",o.value="",n.value="",e.parentElement.remove(),this.todoObject.check=!0}))}))}};(new e).popUpModal();const t=new class extends class{currentDay=(new Date).toISOString().split("T")[0];currentMonth=(new Date).getMonth()+1;compareDay(e){return this.currentDay===e}compareMonth(e){if(""!=e){const t=/\/(\d{1,2})\//g;let o=(e=e.replaceAll("-","/")).match(t);return o=o[0].match(/\d\d/),o=parseInt(o[0]),this.currentMonth===o}}compareWeek(e){if(""!=e){Date.prototype.getWeekNumber=function(){var e=new Date(Date.UTC(this.getFullYear(),this.getMonth(),this.getDate())),t=e.getUTCDay()||7;e.setUTCDate(e.getUTCDate()+4-t);var o=new Date(Date.UTC(e.getUTCFullYear(),0,1));return Math.ceil(((e-o)/864e5+1)/7)};const t=(new Date).getWeekNumber(),o=function(e){return e%4==0&&(e%100!=0||e%400==0)},n=[31,28,31,30,31,30,31,31,30,31,30,31],d=[31,29,31,30,31,30,31,31,30,31,30,31],c=/(\d+)/g;let i=(e=e.replaceAll("-","/")).match(c);i=parseInt(i[0]);const l=/\/(\d{1,2})\//g;let a=e.match(l);a=a[0].match(/\d\d/),a=parseInt(a[0]);const s=/(\d+)$/g;let r=e.match(s);r=parseInt(r[0]);let h=0;if(o(i))for(let e=0;e<a-1;e++)h+=d[e];else for(let e=0;e<a-1;e++)h+=n[e];return t===Math.round((h+r)/7)}}}{constructor(){super(),this.todoArray=[]}getFormInfo(){const t=document.querySelector(".modal"),o=document.querySelector("form"),n=document.getElementById("get-title"),d=document.getElementById("get-description"),c=document.getElementById("get-due-date"),i=document.getElementById("get-priority");o.addEventListener("submit",(o=>{o.preventDefault();const l=new class{constructor(e,t,o,n,d,c){this.title=e,this.description=t,this.dueDate=o,this.priority=n,this.check=d,this.project=c}}(n.value,d.value,c.value,i.value);t.style.display="none",new e(l).todoInjection(),n.value="",d.value="",c.value="",this.todoArray.push(l),this._print()}))}_print(){console.table(this.todoArray)}_todayTodo(){document.getElementById("today").addEventListener("click",(()=>{this._deleteContentElement();const e=this.todoArray.filter((e=>this.compareDay(e.dueDate)&&1!=e.check));this._displayForEach(e)}))}_weekTodo(){document.getElementById("week").addEventListener("click",(()=>{this._deleteContentElement();const e=this.todoArray.filter((e=>this.compareWeek(e.dueDate)&&1!=e.check));this._displayForEach(e)}))}_monthTodo(){document.getElementById("month").addEventListener("click",(()=>{this._deleteContentElement();const e=this.todoArray.filter((e=>this.compareMonth(e.dueDate)&&1!=e.check));this._displayForEach(e)}))}_allTodo(){document.getElementById("all").addEventListener("click",(()=>{this._deleteContentElement();const e=this.todoArray.filter((e=>1!=e.check));this._displayForEach(e)}))}_displayForEach(t){t.forEach((t=>{new e(t).todoInjection()}))}_deleteContentElement(){const e=document.querySelector(".content");let t=e.firstElementChild;for(;t;)t.remove(),t=e.firstElementChild}sortByDate(){this._allTodo(),this._todayTodo(),this._weekTodo(),this._monthTodo()}};t.getFormInfo(),t.sortByDate()})();